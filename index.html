<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>MosquÃ©e â€“ Horaires & Infos</title>

  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link rel="stylesheet" href="./styles.css"/>
</head>

<body>
<header class="card">
  <button id="admin-button" title="Administration"><i class="fa-solid fa-user-shield"></i></button>
  <h1 id="mosque-name">MosquÃ©e</h1>

  <div class="sel-row">
    <span class="small"><i class="fa-solid fa-mosque"></i></span>
    <select id="mosque-selector" title="MosquÃ©e"></select>
  </div>

  <div class="small" id="hijri-date">â€”</div>
  <div class="small" id="gregorian-date">â€”</div>

  <div id="current-time-container"><span id="current-time">--:--:--</span></div>

  <div id="next-prayer" aria-live="polite">
    <span class="name" id="next-prayer-name">Chargement...</span>
    <span class="timer" id="countdown">--:--:--</span>
  </div>

  <!-- âœ… RAMADAN MODULE -->
  <section class="card duo" id="ramadan-card" style="margin-top:12px; padding:14px; display:none">
    <div style="display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap">
      <div style="text-align:left">
        <div style="font-weight:900; color:#1f5e53; font-size:16px">ðŸŒ™ Ramadan</div>
        <div class="small" id="ramadan-sub">â€”</div>
      </div>
      <div style="text-align:right">
        <div style="font-weight:900; font-size:20px; color:#134e42" id="ramadan-day">â€”</div>
        <div class="small" id="ramadan-left">â€”</div>
      </div>
    </div>

    <div class="duo-grid" style="margin-top:12px">
      <div class="duo-item">
        <div class="duo-title">Suhoor (Fajr)</div>
        <div class="duo-time" id="ramadan-suhoor">--:--</div>
      </div>
      <div class="duo-item">
        <div class="duo-title">Iftar (Maghrib)</div>
        <div class="duo-time" id="ramadan-iftar">--:--</div>
      </div>
    </div>
  </section>
</header>

<main>
  <!-- Horaires -->
  <section class="card list" aria-label="Horaires de priÃ¨re">
    <div class="row" id="fajr-item"><span class="name" id="fajr-name">Souba (Fajr)</span><span class="time" id="fajr-time">--:--</span></div>
    <div class="row" id="dhuhr-item"><span class="name" id="dhuhr-name">Tisbar (Dhuhr)</span><span class="time" id="dhuhr-time">--:--</span></div>
    <div class="row" id="asr-item"><span class="name" id="asr-name">Takusan (Asr)</span><span class="time" id="asr-time">--:--</span></div>
    <div class="row" id="maghrib-item"><span class="name" id="maghrib-name">Timis (Maghrib)</span><span class="time" id="maghrib-time">--:--</span></div>
    <div class="row" id="isha-item"><span class="name" id="isha-name">GuÃ©wÃ© (Isha)</span><span class="time" id="isha-time">--:--</span></div>
  </section>

  <!-- Jumua / Chourouk -->
  <section class="card duo">
    <div class="duo-grid">
      <div class="duo-item"><div class="duo-title">Jumua</div><div class="duo-time" id="jumua-time">13:30</div></div>
      <div class="duo-item"><div class="duo-title">Chourouk</div><div class="duo-time" id="shuruq-time">--:--</div></div>
    </div>
  </section>

  <!-- Dons (public) -->
  <section class="card don-public">
    <h3>ðŸ’° Faire un don</h3>
    <ul class="don-lines">
      <li><span><i class="fa-solid fa-wallet" style="color:#0ea5e9"></i> Wave Money</span><strong id="wave-number">â€”</strong></li>
      <li><span><i class="fa-solid fa-mobile-screen-button" style="color:#f97316"></i> Orange Money</span><strong id="orange-number">â€”</strong></li>
    </ul>
    <div class="don-cta">
      <button class="btn btn-primary" id="btn-wave"><i class="fa-solid fa-hand-holding-dollar"></i> Donner via Wave</button>
      <button class="btn btn-primary" id="btn-orange"><i class="fa-solid fa-hand-holding-dollar"></i> Donner via Orange</button>
      <button class="btn btn-ghost" id="btn-claimed"><i class="fa-brands fa-whatsapp"></i> Jâ€™ai donnÃ©</button>
    </div>
  </section>

  <!-- Suivi (admin seulement) -->
  <section class="card don-admin" id="don-admin">
    <h3 style="margin:0 0 8px; color:#1f5e53"><i class="fa-solid fa-chart-simple"></i> Suivi des dons</h3>
    <div class="kpis">
      <div>Objectif jour : <span id="don-goal">100 000</span> CFA</div>
      <div>CollectÃ© : <span id="don-today">0</span> CFA</div>
    </div>
    <div class="progress" aria-label="Progression collecte"><span id="don-bar"></span></div>
    <div class="kpis">
      <div>Total mois : <span id="don-month">0</span> CFA</div>
      <div>Reste : <span id="don-left">0</span> CFA</div>
    </div>

    <div class="add-don">
      <input id="don-amt" type="number" placeholder="Montant (CFA)"/>
      <select id="don-method"><option>Wave</option><option>Orange</option><option>EspÃ¨ces</option></select>
      <input id="don-ref" placeholder="RÃ©f./Remarque"/>
      <button class="btn btn-primary" id="don-add">Ajouter</button>
    </div>

    <table class="table" id="don-table">
      <thead><tr><th>Heure</th><th>Montant</th><th>Mode</th><th>RÃ©f.</th><th>Statut</th><th></th></tr></thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- Qibla simplifiÃ©e -->
  <section class="card qibla">
    <h3 style="margin:0 0 8px; color:#1f5e53">ðŸ§­ Qibla</h3>
    <p>Ouvrir la direction vers la Kaaba dans Google Maps selon la ville de la mosquÃ©e.</p>
    <button class="btn btn-primary" id="qibla-maps"><i class="fa-solid fa-location-arrow"></i> Voir la Qibla sur Google Maps</button>
  </section>

  <div id="status" class="status"></div>
</main>

<footer>
  <button id="events-btn"><i class="fa-solid fa-calendar-alt"></i><span>Ã‰vÃ©nements</span></button>
  <button id="names-btn" style="position:relative"><i class="fa-solid fa-kaaba"></i><span>Noms</span></button>
  <button id="announce-btn" style="position:relative"><i class="fa-solid fa-bell"></i><span>Annonces</span><span id="notif" class="notif">1</span></button>
  <button id="about-btn"><i class="fa-solid fa-circle-info"></i><span>Ã€ propos</span></button>
  <button id="share-btn"><i class="fa-brands fa-whatsapp"></i><span>Partager</span></button>
</footer>

<!-- Modals -->
<div id="modal-ann" class="modal"><div class="box"><span class="close">&times;</span><h3>Annonces</h3><p id="announcement-text">â€”</p></div></div>
<div id="modal-events" class="modal"><div class="box"><span class="close">&times;</span><h3>Ã‰vÃ©nements</h3><div id="events-list">â€”</div></div></div>
<div id="modal-names" class="modal"><div class="box"><span class="close">&times;</span><h3 id="names-header">Les 99 Noms d'Allah</h3><ul id="names-list"></ul></div></div>
<div id="modal-about" class="modal"><div class="box"><span class="close">&times;</span><h3>Ã€ propos</h3><p><strong>Contact :</strong> <span id="about-contact-name">â€”</span><br><strong>TÃ©lÃ©phone :</strong> <span id="about-contact-phone">â€”</span></p></div></div>

<!-- Admin -->
<div id="modal-admin" class="modal" role="dialog" aria-modal="true">
  <div class="box admin">
    <span class="close">&times;</span><h3>Panneau d'administration</h3>

    <!-- Super admin -->
    <div class="row" id="super-row" style="display:none">
      <div style="flex:1"><label>MosquÃ©e</label><select id="adm-mosque"></select></div>
      <div><label>&nbsp;</label><button id="add-mosque" class="save" style="padding:10px 12px; background:#16a34a">Ajouter</button></div>
      <div><label>&nbsp;</label><button id="del-mosque" class="save" style="padding:10px 12px; background:#ef4444">Supprimer</button></div>
    </div>

    <label>Nom de la mosquÃ©e</label><input id="adm-name"/>
    <label>Ville (API)</label><select id="adm-city"></select>

    <div class="row">
      <div style="flex:1"><label>Wave Money</label><input id="adm-wave"/></div>
      <div style="flex:1"><label>Orange Money</label><input id="adm-orange"/></div>
    </div>

    <div class="row">
      <div style="flex:1"><label>Contact (nom)</label><input id="adm-contact"/></div>
      <div style="flex:1"><label>TÃ©lÃ©phone (WhatsApp)</label><input id="adm-phone"/></div>
    </div>

    <label>Jumua (HH:MM)</label><input id="adm-jumua" type="time"/>
    <label>Annonces</label><textarea id="adm-ann" rows="3"></textarea>
    <label>Ã‰vÃ©nements (un par ligne : Titre | Date)</label><textarea id="adm-events" rows="4"></textarea>

    <h3 style="margin-top:18px">PrÃ©cision des horaires</h3>
    <div class="row">
      <div style="flex:1"><label>MÃ©thode</label>
        <select id="adm-method">
          <option value="3">MWL (dÃ©faut)</option>
          <option value="5">Egyptian</option>
          <option value="1">Karachi</option>
          <option value="2">ISNA</option>
          <option value="4">Umm Al-Qura</option>
          <option value="12">Union des mosquÃ©es de France</option>
        </select>
      </div>
      <div style="flex:1"><label>Madhhab (Asr)</label>
        <select id="adm-school">
          <option value="0">Maliki/Shafi</option>
          <option value="1">Hanafi</option>
        </select>
      </div>
    </div>
    <label>Offsets (min) Fajr,Chourouk,Dhuhr,Asr,Maghrib,Isha</label><input id="adm-offsets" placeholder="0,0,0,0,0,0"/>

    <!-- AvancÃ© : super admin seulement -->
    <div id="advanced-block" style="display:none; border-top:1px dashed #e5e7eb; margin-top:12px; padding-top:10px">
      <h3>Options avancÃ©es</h3>
      <label>URL audio Adhan (mp3)</label><input id="adm-adhan-url" placeholder="https://â€¦/adhan.mp3"/>
      <label>Plage silencieuse (HH:MMâ€“HH:MM)</label><input id="adm-quiet" placeholder="22:00-05:00"/>
      <label><input type="checkbox" id="adm-allow-fajr"/> Autoriser Fajr pendant la plage silencieuse</label>
    </div>

    <h3 style="margin-top:18px">Objectif & rapprochement</h3>
    <div class="row">
      <div style="flex:1"><label>Objectif journalier (CFA)</label><input id="adm-goal" type="number" placeholder="100000"/></div>
      <div style="flex:1"><label>Solde Wave (info)</label><input id="adm-solde-wave" type="number" placeholder="optionnel"/></div>
      <div style="flex:1"><label>Solde Orange (info)</label><input id="adm-solde-orange" type="number" placeholder="optionnel"/></div>
    </div>

    <button id="save" class="save"><i class="fa-solid fa-floppy-disk"></i> Enregistrer</button>
    <p class="small" id="role-hint"></p>
  </div>
</div>

<script src="./app.js"></script>
</body>
</html>
